# ü§ñ Telegram FTP Storage Bot "–•—Ä–∞–Ω–∏–ª–∫–∞" by Leshiy
–õ–∏—á–Ω—ã–π Telegram-–±–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ –Ω–∞ –¥–æ–º–∞—à–Ω–∏–π FTP-—Å–µ—Ä–≤–µ—Ä (Keenetic III). 
–ë–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω—ã—Ö –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –ø–æ –ø–∞–ø–∫–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
* **–£–º–Ω–æ–µ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ**: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–µ –∏–º–µ–Ω–∞ –¥–ª—è —Ñ–∞–π–ª–æ–≤ –±–µ–∑ —Å–∂–∞—Ç–∏—è –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–º–µ–Ω–∞ –ø–æ –¥–∞—Ç–µ/–≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è —Å–∂–∞—Ç—ã—Ö —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ.
* **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –î–æ—Å—Ç—É–ø –∫ —Ö—Ä–∞–Ω–∏–ª–∏—â—É –∏–º–µ—é—Ç —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–∑ –±–µ–ª–æ–≥–æ —Å–ø–∏—Å–∫–∞ (`ALLOWED_IDS`).
* **–ê–≤—Ç–æ-—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞**: –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–∞—è –ø–∞–ø–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.
* **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**: –ö–æ–º–∞–Ω–¥–∞ `/debug` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ FTP –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
* **–Ø–∑—ã–∫**: Python 3.11+
* **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞**: aiogram 3.x
* **–•–æ—Å—Ç–∏–Ω–≥**: Render.com (Webhook mode)
* **–•—Ä–∞–Ω–∏–ª–∏—â–µ**: FTP-—Å–µ—Ä–≤–µ—Ä –Ω–∞ –±–∞–∑–µ —Ä–æ—É—Ç–µ—Ä–∞ –∏–ª–∏ –ü–ö

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Environment Variables)
–î–ª—è —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞ –Ω–∞ Render –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–¥–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

| –ö–ª—é—á | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
| :--- | :--- | :--- |
| `BOT_TOKEN` | –¢–æ–∫–µ–Ω –æ—Ç @BotFather | `12345:AA...` |
| `FTP_HOST` | –ê–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ (–±–µ–∑ ftp://) | `leshiy-ftp.myserver.ru` |
| `FTP_USER` | –õ–æ–≥–∏–Ω FTP-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | `tgftpbot` |
| `FTP_PASS` | –ü–∞—Ä–æ–ª—å FTP-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | `your_password` |
| `FTP_FOLDER` | –ö–æ—Ä–Ω–µ–≤–∞—è –ø–∞–ø–∫–∞ –Ω–∞ –¥–∏—Å–∫–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) | `STORAGE` |
| `ALLOWED_IDS` | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫–æ–º—É –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é | `12345678, 111222` |
| `RENDER_EXTERNAL_URL` | URL –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ Render | `https://bot.onrender.com` |
| `RENDER_PORT` | –ü–æ—Ä—Ç –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ Render | `10000` |

## üì° –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–æ—É—Ç–µ—Ä–∞ (Keenetic)
1. **FTP**: –í–∫–ª—é—á–∏—Ç—å —Å–µ—Ä–≤–µ—Ä, —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø—Ä–∞–≤–∞–º–∏ "–ß—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å".
2. **NAT**: –ü—Ä–æ–±—Ä–æ—Å–∏—Ç—å TCP –ø–æ—Ä—Ç 21 –Ω–∞ IP —Ä–æ—É—Ç–µ—Ä–∞ (192.168.1.1).
3. **Firewall**: –†–∞–∑—Ä–µ—à–∏—Ç—å –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–∞ –ø–æ—Ä—Ç 21.
4. **KeenDNS**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∏–∑–≤–Ω–µ.

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
1. –°–¥–µ–ª–∞—Ç—å `git push` –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.
2. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç –¥–µ–ø–ª–æ–π.
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–º–∞–Ω–¥–æ–π `/debug` –≤ –±–æ—Ç–µ.

4. ## üìÇ –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
### –§–æ—Ä–º–∞—Ç—ã –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤:
1. **–°–∂–∞—Ç–æ–µ —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ**: `photo_20251220_183501.jpg` (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ).
2. **–§–∞–π–ª (–±–µ–∑ —Å–∂–∞—Ç–∏—è)**: `IMG_4521.HEIC` (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∏–º–µ–Ω–∏).

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ –Ω–∞ –¥–∏—Å–∫–µ:
–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –∏–µ—Ä–∞—Ä—Ö–∏—é:
```text
STORAGE:
 ‚îî‚îÄ‚îÄ FirstName_LastName/
      ‚îú‚îÄ‚îÄ photo_20251220_183300.jpg
      ‚îú‚îÄ‚îÄ video_20251220_184015.mp4
      ‚îî‚îÄ‚îÄ original_filename.jpg
```
